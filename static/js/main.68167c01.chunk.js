(this.webpackJsonpnormalmaptfjs=this.webpackJsonpnormalmaptfjs||[]).push([[0],{14:function(e,n,t){},16:function(e,n,t){},18:function(e,n,t){"use strict";t.r(n);var i=t(1),r=t.n(i),a=t(4),s=t.n(a),c=(t(14),t(3)),u=t.n(c),l=t(5),o=t(6),d=t(7),m=t(9),p=t(8),f=(t.p,t(16),t(0)),h=function(e){Object(m.a)(t,e);var n=Object(p.a)(t);function t(e){var i;return Object(o.a)(this,t),(i=n.call(this,e)).init=Object(l.a)(u.a.mark((function e(){var n,t,r,a,s,c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.tf,!i.inited){e.next=3;break}return e.abrupt("return");case 3:return i.inited=!0,(t=document.getElementById("but")).innerHTML="started",e.next=8,n.loadLayersModel("/NormalMapTFJS/model/model.json");case 8:return(r=e.sent).inputs[0].shape=[null,null,null,3],r.inputLayers[0].batchInputShape=[null,null,null,3],r.inputLayers[0].inputSpec[0].shape=[null,null,null,3],r.feedInputShapes[0]=[null,null,null,3],r.internalInputShapes[0]=[null,null,null,3],t.innerHTML="loaded",e.next=17,navigator.mediaDevices.getUserMedia({video:{aspectRatio:{ideal:1},facingMode:"environment"}});case 17:return a=e.sent,t.innerHTML="capture",(s=document.getElementById("video")).srcObject=a,e.next=23,s.play();case 23:c=document.getElementById("result"),c.getContext("2d"),l=function e(){var i=n.tidy((function(){t.innerHTML="req";try{var e=n.browser.fromPixels(s).expandDims().div(255);e=n.image.resizeBilinear(e,[512,512]),t.innerHTML="req1";var i=r.predict(e);return t.innerHTML="req2",i=i.reshape(i.shape.slice(1)).mul(.5).add(.5).maximum(0).minimum(1)}catch(a){t.innerHTML=a.message}}));n.browser.toPixels(i,c).then((function(){t.innerHTML="req3",i.dispose(),requestAnimationFrame(e)})).catch((function(e){t.innerHTML=e.message}))},requestAnimationFrame(l);case 27:case"end":return e.stop()}}),e)}))),i.inited=!1,i}return Object(d.a)(t,[{key:"render",value:function(){var e=this;return console.log(this),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("video",{id:"video"}),Object(f.jsx)("canvas",{id:"result"}),Object(f.jsx)("div",{id:"but",onClick:function(){e.init().catch((function(e){console.error(e),document.body.innerText=e.message}))},children:"Play(v3)"})]})}}]),t}(r.a.Component),b=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,19)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,a=n.getLCP,s=n.getTTFB;t(e),i(e),r(e),a(e),s(e)}))};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(h,{})}),document.getElementById("root")),b()}},[[18,1,2]]]);
//# sourceMappingURL=main.68167c01.chunk.js.map